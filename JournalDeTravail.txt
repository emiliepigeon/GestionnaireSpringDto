
# Premier API
Ceci est un journal de travail et non une documentation de l'API.

15/05/2025

Je suis d√©butante voici mon premier projet d'API.
Exercice demand√© par mon formateur : mise en place d'une API de Gestionnaire de formation et de centre.

Pour cela un cahier des charges nous a √©t√© remis, ainsi qu'un fichier looping de la mod√©lisation et conceptualisation de la base de donn√©es relationnelle.

-----------------------------------------------------------------------------------------
JAVA / MAVEN / SPRING BOOT
_________________________________________________________________________
# Demande 1 du formateur
Cr√©ation via phpMyAdmin de la BDD (entit√©s/tables relationnelles et contraintes).

# Demande 2 du formateur
Mettre en place un d√©p√¥t GITHUB propre et pousser r√©guli√®rement (sur le d√©p√¥t distant).

Pour cela :
- je me connecte √† GitHub
- je cr√©e un nouveau repository
- j'ouvre ma console GitBash (sur mon pc je me mais dans le r√©pertoire o√π je veux travailler. Puis clic droit -> afficher plus d'otion -> ouvrir le GitBash).

- Dans mon bash :
1- git clone [url du d√©p√¥t distant]
2- cd [non du dossier] -> je me d√©place dans le bon r√©pertoire
3- git init -> j'initialise mon d√©p√¥t

- Je ferme mon GitBash et j'ouvre mon projet (dossier de travail) dans mon √©diteur de texte ou IDE -> en l'occurence je vais utiliser VsCode.

Nb : j'ai en amont install√© mon JDK et mis en place les variables d'environnement pour pouvoir travailler avec le langage Java.

# Demande 3 du formateur
Cette √©tape √† d√©j√† √©t√© faite. 

Initier le projet Spring Boot via https://start.spring.io/

Si besoin de packages suppl√©mentaires https://mvnrepository.com/

Je vais donc juste r√©cup√©rer mon projet pr√©c√©dent.
Pour cela je fais un copier coll√© de mon ancien projet dans mon nouveau projet.
Je fais cela pour que mon repository soit propre et carr√© (demande du formateur).

# Pour continuer
et avoir un d√©p√¥t propre.

J'ouvre un terminal GitBash dans Vs Code

Je m'assure d'√™tre dans le bon r√©pertoire.


#### AVANT de continuer je vais synchroniser mes d√©p√¥t

ATTENTION Ce que je vais pouss√© ne fonctionne pas.
C'est la base pour recommencer le travail dont je n'avais pas compris les consignes depuis 3 semaines.

git status
git add .
git commit -m "message"
git push

C'est fait!
Je v√©rifie sur mon GitHub.

Tout est Ok.

Mon gitignore est lui aussi bien pris en compte.

# Consignes du formateur pour la suite:
Pour le 20 mai 2025
- Il faut que pour mardi prochain en pr√©sentiel afin de pouvoir avancer soit termin√© les modules API suivant : utilisateur, r√¥le, formation, module, et s√©quence  + un GitHub propre !

# Structure de base du projet
src/main/java
‚îî‚îÄ‚îÄ com/emi/GestionnaireFormation/
    ‚îú‚îÄ‚îÄ controller/
    ‚îú‚îÄ‚îÄ model/
    ‚îú‚îÄ‚îÄ repository/
    ‚îú‚îÄ‚îÄ service/
    ‚îî‚îÄ‚îÄ GestionnaireFormationApplication.java

# Je cr√©er une nouvelle branche de travail
$ git branch [non de la nouvelle branche de travail]

$ git branch
  Api_V1
* main

$ git checkout Api_V1
M       README.md
Switched to branch 'Api_V1'

# Je suis dans ma nouvelle branche de travail

Je vais pousser ma nouvelle branche:
$ git status
$ git add .
$ git commit -m "Initialisation de ma branche de travail Api_V1"
$ git branch -r
$ git push -u origin Api_V1

Je vais creer mes entit√©s (avec leurs CRUD) et  avec mes relations avec jointures :

1 -> le model
2 -> le repository
3 -> le service
4 -> le controller

-------------------------------------------------------------------------------

Suite

Apr√©s la cr√©a de chaque nouvelle entit√© :

- mvn clean install
- mvn spring-boot:run
___________________________________________________________________________________

src/
‚îî‚îÄ‚îÄ main/
    ‚îî‚îÄ‚îÄ java/
        ‚îî‚îÄ‚îÄ com/
            ‚îî‚îÄ‚îÄ emi/
                ‚îî‚îÄ‚îÄ GestionnaireFormation/
                    ‚îú‚îÄ‚îÄ model/
                    ‚îÇ   ‚îú‚îÄ‚îÄ Utilisateur.java
                    ‚îÇ   ‚îú‚îÄ‚îÄ Role.java
                    ‚îÇ   ‚îî‚îÄ‚îÄ Formation.java
                    ‚îú‚îÄ‚îÄ repository/
                    ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurRepository.java
                    ‚îÇ   ‚îú‚îÄ‚îÄ RoleRepository.java
                    ‚îÇ   ‚îî‚îÄ‚îÄ FormationRepository.java
                    ‚îú‚îÄ‚îÄ service/
                    ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurService.java
                    ‚îÇ   ‚îú‚îÄ‚îÄ RoleService.java
                    ‚îÇ   ‚îî‚îÄ‚îÄ FormationService.java
                    ‚îú‚îÄ‚îÄ controller/
                    ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurController.java
                    ‚îÇ   ‚îú‚îÄ‚îÄ RoleController.java
                    ‚îÇ   ‚îî‚îÄ‚îÄ FormationController.java
                    ‚îî‚îÄ‚îÄ GestionnaireFormationApplication.java

Conseils pour √©viter les conflits

    Toujours un seul public class par fichier (le nom du fichier == nom de la classe).

    Pas deux classes avec le m√™me nom dans le m√™me package.

    Utilise les packages pour s√©parer les r√¥les (voir ci-dessus).

    Ne jamais m√©langer plusieurs classes dans un m√™me fichier (sauf classes internes priv√©es, mais ce n‚Äôest pas utile ici).


R√©sum√©

    Un fichier = une classe publique

    Nom du fichier = nom de la classe

    S√©pare bien tes packages (model, repository, service, controller)

    Pas de doublon de nom de classe dans le m√™me package

________________________________________________________________________________

------------------------------------
src/
‚îî‚îÄ‚îÄ main/
    ‚îú‚îÄ‚îÄ java/
    ‚îÇ   ‚îî‚îÄ‚îÄ com/
    ‚îÇ       ‚îî‚îÄ‚îÄ emi/
    ‚îÇ           ‚îî‚îÄ‚îÄ GestionnaireFormation/
    ‚îÇ               ‚îú‚îÄ‚îÄ model/
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ Utilisateur.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ Role.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ Formation.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ Centre.java
    ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ Module.java
    ‚îÇ               ‚îú‚îÄ‚îÄ repository/
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurRepository.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ RoleRepository.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ FormationRepository.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ CentreRepository.java
    ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ ModuleRepository.java
    ‚îÇ               ‚îú‚îÄ‚îÄ service/
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurService.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ RoleService.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ FormationService.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ CentreService.java
    ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ ModuleService.java
    ‚îÇ               ‚îú‚îÄ‚îÄ controller/
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ UtilisateurController.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ RoleController.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ FormationController.java
    ‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ CentreController.java
    ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ ModuleController.java
    ‚îÇ               ‚îî‚îÄ‚îÄ GestionnaireFormationApplication.java
    ‚îî‚îÄ‚îÄ resources/
        ‚îú‚îÄ‚îÄ application.properties
        ‚îî‚îÄ‚îÄ ... (autres fichiers de config, templates, etc.)


------------------------------------------------------------------------------------------


### tableau r√©capitule tous les endpoints REST 
### Pour chaque entit√© [Controller-Service-Repository] ###

| Entit√©      | Action         | M√©thode | URL                                      | Body JSON (exemple)                                                                                  |
|-------------|---------------|---------|------------------------------------------|------------------------------------------------------------------------------------------------------|
| **Role**    | Lister tous    | GET     | /roles/                                  | -                                                                                                    |
|             | D√©tail par ID  | GET     | /roles/1                                 | -                                                                                                    |
|             | Cr√©er          | POST    | /roles/create                            | { "libelle": "Formateur", "statut": true }                                                          |
|             | Modifier       | PUT     | /roles/update/1                          | { "libelle": "Formateur principal", "statut": true }                                                |
|             | Supprimer      | DELETE  | /roles/delete/1                          | -                                                                                                    |
|             | D√©sactiver     | PUT     | /roles/disable/1                         | -                                                                                                    |
| **Utilisateur** | Lister tous    | GET     | /utilisateurs/                            | -                                                                                                    |
|             | D√©tail par matricule | GET     | /utilisateurs/STG011                      | -                                                                                                    |
|             | Cr√©er          | POST    | /utilisateurs/create                      | { "matricule": "STG020", "nom": "Durand", ... , "role": { "id": 2 } }                                |
|             | Modifier       | PUT     | /utilisateurs/update/STG011               | { "nom": "Durand", ... , "role": { "id": 2 } }                                                       |
|             | Supprimer      | DELETE  | /utilisateurs/delete/STG011               | -                                                                                                    |
|             | D√©sactiver     | PUT     | /utilisateurs/disable/STG011              | -                                                                                                    |
| **Formation** | Lister tous    | GET     | /formations/                              | -                                                                                                    |
|             | D√©tail par ID  | GET     | /formations/1                             | -                                                                                                    |
|             | Cr√©er          | POST    | /formations/create                        | { "libelle": "Java", "numeroOffre": "ABC123", ... , "statut": true }                                 |
|             | Modifier       | PUT     | /formations/update/1                      | { "libelle": "Java Avanc√©", ... }                                                                    |
|             | Supprimer      | DELETE  | /formations/delete/1                      | -                                                                                                    |
| **Centre**  | Lister tous    | GET     | /centres/                                 | -                                                                                                    |
|             | D√©tail par ID  | GET     | /centres/1                                | -                                                                                                    |
|             | Cr√©er          | POST    | /centres/create                           | { "nom": "Centre de Paris", "adresse": "10 rue ...", "codePostal": "75000", "ville": "Paris", "statut": true } |
|             | Modifier       | PUT     | /centres/update/1                         | { "nom": "Centre de Lyon", ... }                                                                     |
|             | Supprimer      | DELETE  | /centres/delete/1                         | -                                                                                                    |
| **Module**  | Lister tous    | GET     | /modules/                                 | -                                                                                                    |
|             | D√©tail par ID  | GET     | /modules/1                                | -                                                                                                    |
|             | Cr√©er          | POST    | /modules/create                           | { "nom": "Module Java", "description": "POO", "statut": true }                                       |
|             | Modifier       | PUT     | /modules/update/1                         | { "nom": "Module Spring", ... }                                                                      |
|             | Supprimer      | DELETE  | /modules/delete/1                         | -                                                                                                    |
| **Sequence**| Lister tous    | GET     | /sequences/                               | -                                                                                                    |
|             | D√©tail par ID  | GET     | /sequences/1                              | -                                                                                                    |
|             | Lister par module | GET  | /sequences/module/1                       | -                                                                                                    |
|             | Cr√©er          | POST    | /sequences/create                         | { "libelle": "S√©quence 1", "description": "Intro", "ordre": 1, "statut": true, "module": { "id": 1 } } |
|             | Modifier       | PUT     | /sequences/update/1                       | { "libelle": "S√©quence 1 modifi√©e", ... }                                                           |
|             | Supprimer      | DELETE  | /sequences/delete/1                       | -                                                                                         

-----------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------
22 / 23 mai 2025

### √âvolution V2 de l'API
### Int√©gration du DTO => cr√©ation du package DTO [UtilisateurDto et RoleDto] ###



------------------------------------------------------------------------------------------
26 mai 2025

### √âvolution V2 de l'API suitedu Dto
### Int√©gration du DTO => cr√©ation du package DTO [FormationDto / CentreDto / ModuleDto et SequenceDto] ###

### Ajout des annotations sp√©cifique pour g√©n√©rer la JavaDoc

 mvn clean spring-boot:run

## üü¢ √Ä retenir

    Aucun appel √† un champ ou m√©thode inexistant dans le DTO.

    Chaque m√©thode et classe est comment√©e pour t‚Äôaider √† comprendre le r√¥le de chaque partie.

    Tu peux compl√©ter l‚Äôexemple pour les autres entit√©s (Centre, Utilisateur, etc.) en suivant ce mod√®le.

------------------------------------------------------------------------------------------
